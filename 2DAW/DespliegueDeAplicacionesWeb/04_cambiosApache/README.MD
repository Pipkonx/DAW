### ğŸ“ Ejercicio 4: Cambiar configuracion de apache

1.  Apache utilizarÃ¡ el puerto 81 ademÃ¡s del 80

    Para esto primero primero entramos al archvio de configuracion de los puertos
    ![paso1](./images/01.png)

    Ahora agregamos para que esecuche por el puerto 81 `control + o` y `control + x` para guardar y salir
    ![paso2](./images/02.png)

    Ahora simplemente reiniciamos el servicio con `sudo systemctl restart apache2` y ya estarÃ­a escuchando por ese puerto
    ![paso3](./images/03.png)

2.  AÃ±adir el dominio â€œmarisma.intranetâ€ en el fichero â€œhostsâ€

    Ejecuta el comando para editar: Escribe `sudo nano /etc/hosts` y presiona Enter.
    ![paso4](./images/04.png)

    AÃ±ade la entrada: En una nueva lÃ­nea, escribe la direcciÃ³n IP del servidor, un espacio, y luego el dominio: 192.168.1.100 marisma.intranet
    ![paso5](./images/05.png)

3.  Cambia la directiva â€œServerTokensâ€ para mostrar el nombre del producto.
    ![paso6](./images/06.png)
    ![paso7](./images/07.png)

4.  Comprueba si se visualiza el pie de pÃ¡gina en las pÃ¡ginas generadas por Apache (por ejemplo, en las pÃ¡ginas de error). Cambia el valor de la directiva â€œServerSignatureâ€ y comprueba que funciona correctamente.
    ![paso8](./images/08.png)
    ![paso9](./images/09.png)
    ![paso10](./images/10.png)

5.  Crea un directorio â€œpruebaâ€ y otro directorio â€œprueba2â€. Incluye un par de pÃ¡ginas en cada una de ellas.
    ![paso11](./images/11.png)
    ![paso12](./images/12.png)
    ![paso13](./images/13.png)
6.  Redirecciona el contenido de la carpeta â€œpruebaâ€ hacia â€œprueba2â€
    ![paso14](./images/14.png)
    ![paso15](./images/15.png)
    ![paso16](./images/16.png)

7.  Es posible redireccionar tan solo una pÃ¡gina en lugar de toda la carpeta. PruÃ©balo.
    ![paso17](./images/17.png)

8.  Usa la directiva userdir
    ![paso18](./images/18.png)

9.  Usa la directiva alias para redireccionar a una carpeta dentro del directorio de usuario.
    ![paso19](./images/19.png)
    ![paso20](./images/20.png)
    ![paso21](./images/21.png)
    ![paso22](./images/22.png)

10. Â¿Para quÃ© sirve la directiva Options y dÃ³nde aparece. Comprueba si apache indexa los directorios. Si es asÃ­, Â¿cÃ³mo lo desactivamos?

- `Options` controla caracterÃ­sticas para un directorio (como listar archivos).
- `Indexes` permite mostrar el contenido de un directorio si no hay archivo Ã­ndice.
- Para desactivar la indexaciÃ³n, usar:

apache
Options -Indexes

Recargamos apache tras los cambios con `sudo systemctl reload apache2`




# Trabajando con scripts  (Debes publicarlos en Github)

### Crea un script que aÃ±ada un nombre de dominio y una ip al fichero hosts. Debemos comprobar que no existe dicho dominio en el fichero hosts

### Crea un script que nos permita crear una pÃ¡gina web con un tÃ­tulo, una cabecera y un mensaje


# ğŸ§  GuÃ­a paso a paso â€” CreaciÃ³n y prueba de scripts en Linux

Este documento describe de forma visual el proceso para crear y probar tres scripts bÃ¡sicos en Linux:

1. **agregar_puerto_apache.sh** â€” AÃ±ade un puerto al fichero de configuraciÃ³n de Apache.  
2. **aÃ±adir_hosts.sh** â€” AÃ±ade una IP y un dominio al archivo `/etc/hosts`.  
3. **crear_web.sh** â€” Crea una pÃ¡gina web simple con un tÃ­tulo, cabecera y mensaje.  

Cada paso incluye un espacio donde debes colocar una **captura de pantalla**.

---

## ğŸ¥‡ 1) Ir a tu home y crear la carpeta del proyecto

Abre una terminal, navega hasta tu carpeta personal y crea un nuevo directorio para los scripts.  
Comprueba que te encuentras dentro del directorio reciÃ©n creado.

ğŸ“¸ **Captura de pantalla:**  
> Muestra la terminal en el directorio `/home/tuusuario/mis-scripts-apache`.

![imagen](imagenes/paso1.png)

---

## ğŸ¥ˆ 2) Crear el script `puerto_apache.sh`

Crea un nuevo archivo llamado `puerto_apache.sh` dentro de la carpeta del proyecto.  
Este script permitirÃ¡ agregar un puerto de escucha al fichero de configuraciÃ³n de Apache.

ğŸ“¸ **Captura de pantalla:**  
> Muestra el archivo `puerto_apache.sh` creado y visible en la terminal o editor.

![imagen](imagenes/paso2.png)

---

## ğŸ¥‰ 3) Crear el script `aÃ±adir_hosts.sh`

Crea el script `aÃ±adir_hosts.sh`, que servirÃ¡ para agregar un dominio y su IP al archivo `/etc/hosts`.  
Este script comprueba primero si el dominio ya existe antes de aÃ±adirlo.

ğŸ“¸ **Captura de pantalla:**  
> Muestra el archivo `aÃ±adir_hosts.sh` creado correctamente.

![imagen](imagenes/paso3.png)

---

## ğŸ… 4) Crear el script `crear_web.sh`

Crea el script `crear_web.sh`, que generarÃ¡ una pÃ¡gina web sencilla con un tÃ­tulo, una cabecera y un mensaje.  
La pÃ¡gina se guardarÃ¡ en una carpeta que se crea automÃ¡ticamente.

ğŸ“¸ **Captura de pantalla:**  
> Muestra el archivo `crear_web.sh` creado y visible en tu terminal o editor.

![imagen](imagenes/paso4.png)

---

## âš™ï¸ 5) Dar permisos de ejecuciÃ³n a los scripts

Concede permisos de ejecuciÃ³n a los tres scripts para poder ejecutarlos desde la terminal.  
Verifica que tienen permisos (`x`) activados.

ğŸ“¸ **Captura de pantalla:**  
> Muestra los tres scripts listos para ejecutarse, con permisos de ejecuciÃ³n visibles.

![imagen](imagenes/paso5.png)

---

## ğŸŒ 6) Probar el script `crear_web.sh`

Ejecuta el script para crear una pÃ¡gina de prueba.  
Comprueba que se ha creado la carpeta con el archivo `index.html` dentro y que el contenido del HTML se generÃ³ correctamente.

ğŸ“¸ **Captura de pantalla:**  
> Muestra el archivo `index.html` generado y el contenido HTML visible.

![imagen](imagenes/paso6.png)

---

## ğŸ§© 7) Probar el script `aÃ±adir_hosts.sh`

Ejecuta el script para agregar una nueva lÃ­nea al archivo `/etc/hosts`.  
Verifica que la IP y el dominio se han aÃ±adido correctamente.  
Si el dominio ya existÃ­a, el script mostrarÃ¡ un mensaje avisando.

ğŸ“¸ **Captura de pantalla:**  
> Muestra la nueva entrada aÃ±adida al archivo `/etc/hosts`.

![imagen](imagenes/paso7.png)

---

## ğŸ”Š 8) Probar el script `puerto_apache.sh`

Ejecuta el script para agregar un nuevo puerto de escucha al fichero de configuraciÃ³n de Apache.  
Comprueba que la lÃ­nea `Listen <PUERTO>` se aÃ±adiÃ³ correctamente.  
Si el puerto ya estaba presente, el script mostrarÃ¡ un aviso.

ğŸ“¸ **Captura de pantalla:**  
> Muestra el contenido del archivo `ports.conf` con el nuevo puerto aÃ±adido.

![imagen](imagenes/paso8.png)

---

âœ… **Hasta aquÃ­, has completado los pasos para crear y probar tus tres scripts en Linux.**  
Ahora puedes continuar con los pasos para crear tu repositorio y subirlo a GitHub si lo deseas.












Los scripts deben comprobar previamente el nÃºmero de parÃ¡metros y en el caso de no pasar los parÃ¡metros necesarios nos mostrarÃ¡ un error indicando la sintaxis correcta.

Se aconseja leer previamente alguno de los siguientes enlaces sobre shell script
https://github.com/denysdovhan/bash-handbook
https://www.shellscript.sh/
http://www.freeos.com/guides/lsst/index.html
Dos comandos que te pueden ser de utilidad son:
grep
https://geekland.eu/uso-del-comando-grep-en-linux-y-unix-con-ejemplos/
sed
https://geekland.eu/uso-del-comando-sed-en-linux-y-unix-con-ejemplos/
 -->


- [Volver al Ã­ndice principal](../README.md)